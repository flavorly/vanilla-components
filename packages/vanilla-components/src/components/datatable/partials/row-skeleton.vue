<script setup lang="ts">
import type { PropType } from 'vue'
import { useInjectsClassesList } from '../../../core/use'
import Skeleton from '../../skeleton/skeleton.vue'
import type * as Types from '../../datatable/config'

const props = defineProps({
  numberOfRows: {
    type: [Number, String] as PropType<number>,
    required: true,
  },
  columns: {
    type: [Array] as PropType<Types.DatatableColumnsComputed>,
    required: true,
  },
  isSelectable: {
    type: [Boolean] as PropType<boolean>,
    required: true,
  },
})

const classesList = useInjectsClassesList('configuration_vanilla_datatable')!

// defineOptions({
//   name: 'VanillaDatatableRowSkeleton',
// })
</script>

<template>
  <tbody :class="[classesList.skeletonTableBody]">
    <tr
      v-for="(row, rowIndex) in numberOfRows"
      :key="rowIndex"
    >
      <td
        v-if="isSelectable"
        :key="`checkbox-${rowIndex}`"
        :class="[classesList.tableColumnCheckbox]"
      >
        <input
          :class="[
            classesList.tableCheckbox,
          ]"
          type="checkbox"
        >
      </td>
      <td
        v-for="(column, columnIndex) in columns"
        :key="columnIndex"
        :class="[
          classesList.skeletonTableColumn,
          column.name.toLocaleLowerCase() === 'id' ? classesList.tableIdColumn : '',
        ]"
      >
        <Skeleton
          :width="column.name.toLocaleLowerCase() === 'id' ? `${Math.floor(Math.random() * (3 - 1 + 1) + 1)}rem` : `${Math.floor(Math.random() * (12 - 7 + 1) + 7)}rem`"
        />
      </td>
    </tr>
  </tbody>
</template>
